<!DOCTYPE html>
<html>
<head>
	<title>Problem 10</title>
</head>
<body>
<script type="text/javascript">
	var t0 = performance.now();
	console.log(sumOfPrimes(2000000));
	var t1 = performance.now();
	console.log("sumOfPrimes took " + (t1 - t0) + " milliseconds.")

	function sumOfPrimes(maxPrime) {
		let sum = 2 + 3 + 5 + 7 + 11 + 13 + 17 + 19 + 23;

		for (let testNum = 29; testNum < maxPrime; testNum += 6) {
			if (isPrime(testNum)) {
				debugger;
				sum += testNum;
			}
			if (isPrime(testNum + 2)) {
				debugger;
				sum += testNum + 2;
			}
		}

		return sum;
	}

	function isPrime(n) {
		if ((n % 3 != 0) && (n % 5 != 0) && (n % 7 != 0) && (n % 11 != 0) && (n % 13 != 0) && (n % 17 != 0) && (n % 19 != 0) && (n % 23 != 0)) {
			debugger;
			let nMinusOne = n - 1;
			let r = 0;  // nMinusOne % (Math.pow((r + 1), 2))
			let d = nMinusOne;
			while (d % 2 == 0) {
				r++;
				d = nMinusOne / Math.pow(2, r);
			}
			for (let k = 0; k < 5; k++) {
				debugger;
				let a = 2 + Math.floor(Math.random() * (n - 4));
				let x = Math.pow(a, d) % n;
				if (x == 1 || x == nMinusOne) {continue;}
				else {
					let tempX = x;
					for (let i = 1; i <= r; i++) {
						tempX = Math.pow(tempX, 2) % n;
						if (tempX == nMinusOne) {break;}
						else if (tempX == 1 || i == r) {return false;}
					}
				}
			}
			return true;
		} 
		else {return false;}
	}
</script>
</body>
</html>